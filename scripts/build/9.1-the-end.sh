#!/bin/bash
set -e

# 9.1. The End

echo "Finalize LFS configuration.."

# LFS version file
echo 9.1-systemd > /etc/lfs-release

# LSB version file
cat > /etc/lsb-release << "EOF"
DISTRIB_ID="Linux From Scratch"
DISTRIB_RELEASE="9.1-systemd"
DISTRIB_CODENAME="$DISTRIB_CODENAME"
DISTRIB_DESCRIPTION="Linux From Scratch"
EOF

# OS-Release version file
cat > /etc/os-release << "EOF"
NAME="Linux From Scratch"
VERSION="9.1-systemd"
ID=lfs
PRETTY_NAME="Linux From Scratch 9.1-systemd"
VERSION_CODENAME="$DISTRIB_CODENAME"
EOF

# define empty password for root
cat > /etc/shadow << "EOF"
root::12699:0:::::
EOF

# add login logo
cat > /etc/issue << "EOF"
[40m[40m
[1;30;44m         [40m      [44m       [0;37;40m
[1;30;44m        [40m        [44m      [0;37;40m  [1;41m   [0;40m [1;41m [0;40m   [1;41m [0;40m [1;41m [0;40m  [1;41m [0;40m     [1;32;42m [0;37;40m [1;30;47m  [0;37;40m     [1;30;47m      [0;37;40m [1;30;47m  [0;37;40m   [1;30;47m  [0;37;40m [1;30;47m  [0;37;40m  [1;30;47m  [0;37;40m [1;30;47m  [0;37;40m  [1;30;47m  [40m
[44m        [40m [47m  [40m [47m  [40m  [44m      [0;37;40m [1;41m [0;40m    [1;41m  [0;40m  [1;41m [0;40m [1;41m [0;40m  [1;41m [0;40m    [1;32;42m [0;37;40m  [1;30;47m  [0;37;40m       [1;30;47m  [0;37;40m   [1;30;47m   [0;37;40m  [1;30;47m  [0;37;40m [1;30;47m  [0;37;40m  [1;30;47m  [0;37;40m  [1;30;47m    [0;37;40m [40m
[1;30;44m        [40m [47m [40m   [47m [40m   [44m     [0;37;40m [1;41m [0;40m [1;41m  [0;40m [1;41m [0;40m [1;41m [0;40m [1;41m [0;40m [1;41m [0;40m  [1;41m [0;40m   [1;32;42m [0;37;40m   [1;30;47m  [0;37;40m       [1;30;47m  [0;37;40m   [1;30;47m    [0;37;40m [1;30;47m  [0;37;40m [1;30;47m  [0;37;40m  [1;30;47m  [0;37;40m   [1;30;47m  [40m
[1;30;44m        [40m  [43m    [40m   [44m     [0;37;40m [1;41m [0;40m  [1;41m [0;40m [1;41m [0;40m  [1;41m  [0;40m [1;41m [0;40m  [1;41m [0;40m  [1;32;42m [0;37;40m    [1;30;47m  [0;37;40m       [1;30;47m  [0;37;40m   [1;30;47m  [0;37;40m [1;30;47m    [0;37;40m [1;30;47m  [0;37;40m  [1;30;47m  [0;37;40m  [1;30;47m    [0;37;40m
[1;30;44m        [40m [0;30;43m`----'[40m  [1;44m     [0;37;40m  [1;41m   [0;40m [1;41m [0;40m   [1;41m [0;40m  [1;41m  [0;40m  [1;32;42m [0;37;40m     [1;30;47m      [0;37;40m [1;30;47m      [0;37;40m [1;30;47m  [0;37;40m   [1;30;47m  [0;37;40m  [1;30;47m    [0;37;40m  [1;30;47m  [0;37;40m  [1;30;47m  [0;37;40m
[44m        [40m [47m [37m    [30m [40m   [44m    [0;37;40m
[1;30;44m       [40m [47m        [40m    [44m  [0;37;40m[2C[1;37;40m\s \r  \n \m
[1;30;44m       [40m [47m         [40m    [44m [0;37;40m[2C[1;37;40m\v
[1;30;44m       [40m [47m         [40m    [44m [0;37;40m[2C[1;37;40m
[1;30;44m      [40m [47m          [40m     [0;37m[2C[1;37;40m[0m
[1;30;44m     [40m  [47m          [40m     [0;37m[2C[1;37;40m[0m
[1;30;44m     [43m   [47m        [43m   [40m   [0;37m[2C
[1;30;44m   [43m     [47m        [43m    [40m  [0;37m[2C
[1;30;44m [43m       [47m        [43m      [0;37;40m[2C
[1;30;44m [43m       [40m [47m      [40m [43m      [0;37;40m[2C
[0m[255D
EOF
